<Project Sdk="Microsoft.Build.Traversal/3.3.0">
  <PropertyGroup>
    <!-- Allow all projects -->
    <SolutionSaveLocation>$(MSBuildThisFileDirectory)\src\Codex.sln</SolutionSaveLocation>
    <ProjectFilterLocal>$(ProjectFilter)</ProjectFilterLocal>
    <SolutionDisplayName>$([System.IO.Path]::GetFileName($([System.IO.Path]::GetDirectoryName($(MSBuildThisFileFullPath)))))</SolutionDisplayName>
  </PropertyGroup>

  <ItemDefinitionGroup>
    <CodexReference Folder="codex" />
    <LuceneReference Folder="lucene" IsLucene="1" />
    <ZoneTreeReference Folder="ztree" />
  </ItemDefinitionGroup>

  <ItemGroup>
    <SolutionFile Include="*.*" Folder="_files" />
    <SolutionFile Include="src\Directory.Build.targets" Folder="build" />
    <SolutionFile Include="Directory.Build.props" Folder="build\root" />
    <SolutionFile Include="src\Directory.Build.props" Folder="build" />
    <SolutionFile Include="src\Packages.proj" Folder="build" />
    <SolutionFile Include="build.cmd" Folder="build" />
    <SolutionFile Include="src\Directory.Packages.props" Folder="build" />
  </ItemGroup>

  <ItemGroup>
    <CodexReference Include="Codex.ObjectModel" />
    <CodexReference Include="Codex.Sdk" />
    <CodexReference Include="Codex.Analysis" />
    <CodexReference Include="Codex.Analysis.External" />
    <CodexReference Include="Codex.Analysis.Managed" />
    <CodexReference Include="Codex.Decompilation" />
    <CodexReference Include="Codex.Web.Common" Folder="web" />
    <CodexReference Include="Codex.Web.Wasm" Folder="web" Condition="'$(SkipWeb)' != 'true'" Web="1" Wasm="1" />

    <CodexReference Include="Codex.Lucene" />
    <CodexReference Include="Codex.Application" Pack="1" Exe="1" />
    <CodexReference Include="Codex.Storage" />

    <CodexReference Folder="Advanced" Include="Perspectil" />

    <CodexReference Folder="Support" Include="Codex.Framework.Generator" />

    <CodexReference Folder="Test" Include="CodexTestBProject" />
    <CodexReference Folder="Test" Include="Codex.Integration.Tests" />
    <CodexReference Folder="Test" Include="CodexTestProject" />
    <CodexReference Folder="Test" Include="VBCodexTestProject" />
  </ItemGroup>

  <ItemGroup>
    <LuceneReference Include="Lucene.Net" />
    <LuceneReference Include="Lucene.Net.Analysis.Common" />
    <LuceneReference Include="Lucene.Net.Queries" />
    <LuceneReference Include="Lucene.Net.QueryParser" />
    <LuceneReference Include="Lucene.Net.Sandbox" />
    <LuceneReference Include="Lucene.Net.Highlighter" />
    <LuceneReference Include="Lucene.Net.Memory" />
    <LuceneReference Include="Lucene.Net.Misc" />
  </ItemGroup>

  <ItemGroup>
    <ZoneTreeReference Include="ZoneTree" />
    <ZoneTreeReference Include="ZoneTree.UnitTests" />
  </ItemGroup>

  <Target Name="Print">
    <Message Importance="high" Text="%(ProjectReference.Identity)" />
  </Target>

  <Import Project="src\Directory.Build.targets" />
</Project>